{% extends 'base.html' %}
{% block title %}{{ wedding.name }} ‚Äî –æ–±–∑–æ—Ä{% endblock %}

{% block content %}
<a href="{{ url_for('index') }}" class="flex items-center gap-1 text-pink-600 hover:text-pink-800 font-semibold mb-6 transition">
  <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"/></svg>
  –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É
</a>

<div class="flex items-center gap-3 mb-1">
  <span class="text-3xl">üíç</span>
  <h2 class="text-2xl font-extrabold tracking-tight">{{ wedding.name }}</h2>
</div>
{% if wedding.date %}
  <div class="flex items-center gap-2 mb-6 text-pink-700">
    <svg class="w-5 h-5 text-pink-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3M16 7V3M3 11h18M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
    </svg>
    <span class="font-semibold">{{ wedding.date.strftime('%d.%m.%Y') }}</span>
  </div>
{% endif %}

<div class="grid md:grid-cols-2 gap-6">
  <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤ -->
  <a href="{{ url_for('wedding_pages.wedding_expenses', wedding_id=wedding.id) }}"
     class="group block glass p-6 rounded-2xl border border-pink-100 hover:border-pink-300 hover:shadow-xl transition relative overflow-hidden">
    <div class="absolute -right-6 -top-6 w-28 h-28 rounded-full bg-pink-100 opacity-70 group-hover:opacity-90"></div>
    <div class="relative flex items-center gap-3">
      <div class="text-4xl">üí∏</div>
      <div>
        <div class="text-xl font-black text-pink-800 group-hover:text-pink-600 transition">–†–∞—Å—Ö–æ–¥—ã</div>
        <div class="text-gray-500 text-sm">–î–æ–±–∞–≤–ª—è–π—Ç–µ –ø–æ–∑–∏—Ü–∏–∏, —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∏ —Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Ç–æ–≥–∏</div>
      </div>
    </div>
    <div class="mt-5 grid grid-cols-2 gap-3 text-sm">
      <div class="bg-pink-50 border border-pink-100 rounded-xl px-3 py-2">
        <div class="text-gray-500">–ü–æ–∑–∏—Ü–∏–π</div>
        <div class="font-bold">{{ wedding.expenses|length }}</div>
      </div>
      <div class="bg-emerald-50 border border-emerald-100 rounded-xl px-3 py-2">
        <div class="text-gray-500">–ò—Ç–æ–≥–æ</div>
        <div class="font-bold">{{ (wedding.expenses | sum(attribute='total')) or 0 | int }} —Å—É–º</div>
      </div>
    </div>
  </a>

  <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –≥–æ—Å—Ç–µ–π -->
  <a href="{{ url_for('wedding_pages.wedding_guests', wedding_id=wedding.id) }}"
     class="group block glass p-6 rounded-2xl border border-indigo-100 hover:border-indigo-300 hover:shadow-xl transition relative overflow-hidden">
    <div class="absolute -right-6 -top-6 w-28 h-28 rounded-full bg-indigo-100 opacity-70 group-hover:opacity-90"></div>
    <div class="relative flex items-center gap-3">
      <div class="text-4xl">üßë‚Äçü§ù‚Äçüßë</div>
      <div>
        <div class="text-xl font-black text-indigo-800 group-hover:text-indigo-600 transition">–ì–æ—Å—Ç–∏</div>
        <div class="text-gray-500 text-sm">–°–ø–∏—Å–æ–∫ –≥–æ—Å—Ç–µ–π, —Å—Ç–∞—Ç—É—Å—ã –∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è PDF</div>
      </div>
    </div>
    <div class="mt-5 grid grid-cols-3 gap-3 text-sm">
      <div class="bg-indigo-50 border border-indigo-100 rounded-xl px-3 py-2">
        <div class="text-gray-500">–í—Å–µ–≥–æ</div>
        <div class="font-bold">{{ wedding.guests|length }}</div>
      </div>
      <div class="bg-green-50 border border-green-100 rounded-xl px-3 py-2">
        <div class="text-gray-500">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏–ª–∏</div>
        <div class="font-bold">
          {{ wedding.guests|selectattr('status','equalto','confirmed')|list|length }}
        </div>
      </div>
      <div class="bg-red-50 border border-red-100 rounded-xl px-3 py-2">
        <div class="text-gray-500">–û—Ç–∫–∞–∑–∞–ª–∏—Å—å</div>
        <div class="font-bold">
          {{ wedding.guests|selectattr('status','equalto','declined')|list|length }}
        </div>
      </div>
    </div>
  </a>
</div>
{% endblock %}
